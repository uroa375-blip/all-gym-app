<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALL GYM - Nearby</title>
    <link rel="stylesheet" href="css/place.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/footer.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
</head>

<body>
    <div class="list-container" style="display:flex; flex-direction:column; overflow:hidden;">
        <div class="content-scroll-wrapper">
        
        <!-- Nearby Section -->
        <section class="section nearby">
            <h2 class="section-title">내 주변 가까운 곳</h2>
            <div class="scroll-container horizontal-scroll" id="nearbyScroll">
                <!-- Items will be generated by JS -->
            </div>
            <div class="scroll-container horizontal-scroll" id="nearbyScroll2" style="margin-top: 20px;">
                <!-- Second row of Nearby Items -->
            </div>
        </section>

        <!-- Ranking Section -->
        <section class="section ranking" style="padding-left: 0;">
            <h2 class="section-title" style="padding-left: 20px;">랭킹 Top 10</h2>
            
            <div class="info-box">
                <p>1주간 리뷰, 평점, 회원권 판매 순위를 통계하여 10위 안에 선정된 운동시설입니다.</p>
                <p>순위는 매주 월요일 06:00시 기준으로 변동됩니다.</p>
            </div>

            <div class="grid-container" id="rankingGrid">
                <!-- Ranking items will be generated by JS -->
            </div>
        </section>

        <!-- Newly Registered Section -->
        <section class="section newly-registered">
            <h2 class="section-title">신규 등록된 곳</h2>
            <div class="scroll-container horizontal-scroll" id="newlyRegisteredScroll">
                <!-- New items will be generated by JS -->
            </div>
        </section>

        <!-- Recommendation Form -->
        <section class="recommend-section">
            <p class="recommend-title">등록 원하시는 장소가 있으시면 추천해주세요!</p>
            <div class="recommend-form">
                <div class="form-group">
                    <label>업장명:</label>
                    <input type="text">
                </div>
                <div class="form-group">
                    <label>종목:</label>
                    <input type="text">
                </div>
                <div class="form-group">
                    <label>주소:</label>
                    <input type="text">
                </div>
                <div class="form-group">
                    <label>전화번호:</label>
                    <input type="text">
                </div>
                <button class="save-btn" onclick="saveRecommendation()">저장</button>
            </div>
        </section>

    </div>
    
    <nav class="global-footer">
        <a href="menu.html" class="footer-item active">
            <span class="material-symbols-outlined">home</span>
        </a>
        <a href="map.html" class="footer-item">
            <span class="material-symbols-outlined">location_on</span>
        </a>
        <a href="favorite.html" class="footer-item">
            <span class="material-symbols-outlined">favorite</span>
        </a>
        <a href="setting.html" class="footer-item">
            <span class="material-symbols-outlined">person</span>
        </a>
    </nav>
    </div>

    <script>
        // Data Configuration
        const nearbyData1 = [
            { title: '리드짐', rating: '4.6', reviews: 42, price: '90,000', img: 'near1.png', event: true },
            { title: '리드짐', rating: '4.6', reviews: 42, price: '90,000', img: 'near3.png', event: true },
            { title: '리드짐', rating: '4.6', reviews: 42, price: '90,000', img: 'pic1.png', event: true },
            { title: '리드짐', rating: '4.6', reviews: 42, price: '90,000', img: 'pic2.png', event: true },
            { title: '리드짐', rating: '4.6', reviews: 42, price: '90,000', img: 'pic3.png', event: true },
            { title: '리드짐', rating: '4.6', reviews: 42, price: '90,000', img: 'gym.png', event: true },
            { title: '리드짐', rating: '4.6', reviews: 42, price: '90,000', img: 'fitness.png', event: true },
            { title: '리드짐', rating: '4.6', reviews: 42, price: '90,000', img: 'health.png', event: true }
        ];

        const nearbyData2 = [
            { title: '리드짐', rating: '4.6', reviews: 42, price: '90,000', img: 'thumb1.png', event: true },
            { title: '리드짐', rating: '4.6', reviews: 42, price: '90,000', img: 'thumb2.png', event: true },
            { title: '리드짐', rating: '4.6', reviews: 42, price: '90,000', img: 'thumb3.png', event: true },
            { title: '리드짐', rating: '4.6', reviews: 42, price: '90,000', img: 'thumb4.png', event: true },
            { title: '리드짐', rating: '4.6', reviews: 42, price: '90,000', img: 'thumb5.png', event: true },
            { title: '리드짐', rating: '4.6', reviews: 42, price: '90,000', img: 'thumb6.png', event: true },
            { title: '리드짐', rating: '4.6', reviews: 42, price: '90,000', img: 'thumb9.png', event: true },
            { title: '리드짐', rating: '4.6', reviews: 42, price: '90,000', img: 'thumb10.png', event: true }
        ];

        const rankingData = [
            { title: '리드짐', rating: '4.6', reviews: 42, price: '90,000', img: 'rank1.png', event: true, rank: '1st' },
            { title: '리드짐', rating: '4.6', reviews: 42, price: '90,000', img: 'rank2.png', event: true, rank: '2nd' },
            { title: '리드짐', rating: '4.6', reviews: 42, price: '90,000', img: 'rank3.png', event: true, rank: '3rd' },
            { title: '리드짐', rating: '4.6', reviews: 42, price: '90,000', img: 'rank4.png', event: true, rank: '4th' },
            { title: '리드짐', rating: '4.6', reviews: 42, price: '90,000', img: 'rank5.png', event: true, rank: '5th' },
            { title: '리드짐', rating: '4.6', reviews: 42, price: '90,000', img: 'rank6.png', event: true, rank: '6th' },
            { title: '리드짐', rating: '4.6', reviews: 42, price: '90,000', img: 'rank7.png', event: true, rank: '7th' },
            { title: '리드짐', rating: '4.6', reviews: 42, price: '90,000', img: 'rank8.png', event: true, rank: '8th' },
            { title: '리드짐', rating: '4.6', reviews: 42, price: '90,000', img: 'rank9.png', event: true, rank: '9th' },
            { title: '리드짐', rating: '4.6', reviews: 42, price: '90,000', img: 'rank10.png', event: true, rank: '10th' }
        ];

        const newlyRegisteredData = Array(15).fill({
            title: '파이어짐',
            price: '90,000',
            img: 'rank1.png',
            new: true
        });

        function createCard(data) {
            const card = document.createElement('div');
            card.className = 'card-item';
            
            let rankHtml = data.rank ? `<div class="rank-badge">${data.rank}</div>` : '';
            let newHtml = data.new ? `<div class="tag new-badge">new</div>` : '';

            card.innerHTML = `
                <div class="card-image-wrap">
                    ${rankHtml}
                    ${newHtml}
                    <img src="img/${data.img}" onerror="this.src='img/gym.png'">
                </div>
                <div class="card-info">
                    <div class="card-header">
                        <span class="card-title">${data.title}</span>
                        ${data.rating ? `
                        <div class="card-rating">
                            <img src="img/pinkstar.png" class="pinkstar-icon">
                            <span>${data.rating}(<span class="review-count">${data.reviews}</span>)</span>
                        </div>` : ''}
                    </div>
                    <div class="card-footer" style="${data.new ? 'margin-bottom: 0;' : ''}">
                        <span class="price-label">1개월</span>
                        <div class="price-value-wrap">
                            <span class="price-value">${data.price}</span>
                            <span class="price-unit">원</span>
                        </div>
                    </div>
                    ${!data.new ? `
                    <div class="card-actions">
                        ${data.event ? '<span class="tag event">event</span>' : '<span></span>'}
                        <div class="cart-icon">
                            <img src="img/cart.png" class="cart-icon-img">
                        </div>
                    </div>` : ''}
                </div>
            `;

            // Interactivity
            const imageWrap = card.querySelector('.card-image-wrap');
            imageWrap.addEventListener('click', () => {
                window.location.href = 'PT.html';
            });

            if (data.rating) {
                const starIcon = card.querySelector('.pinkstar-icon');
                const countSpan = card.querySelector('.review-count');
                starIcon.addEventListener('click', (e) => {
                    e.stopPropagation();
                    let current = parseInt(countSpan.textContent);
                    countSpan.textContent = current + 1;
                });
            }

            const cartBtn = card.querySelector('.cart-icon');
            if (cartBtn) {
                cartBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    window.location.href = 'cart.html';
                });
            }

            return card;
        }

        // Render sections
        const nearbyScroll = document.getElementById('nearbyScroll');
        nearbyData1.forEach(item => nearbyScroll.appendChild(createCard(item)));

        const nearbyScroll2 = document.getElementById('nearbyScroll2');
        nearbyData2.forEach(item => nearbyScroll2.appendChild(createCard(item)));

        const rankingGrid = document.getElementById('rankingGrid');
        rankingData.forEach(item => rankingGrid.appendChild(createCard(item)));

        const newlyRegisteredScroll = document.getElementById('newlyRegisteredScroll');
        newlyRegisteredData.forEach(item => newlyRegisteredScroll.appendChild(createCard(item)));

        // Wheel Scroll Support for PC
        const scrollContainers = document.querySelectorAll('.horizontal-scroll');
        scrollContainers.forEach(container => {
            container.addEventListener('wheel', (e) => {
                if (e.deltaY !== 0) {
                    e.preventDefault();
                    container.scrollLeft += e.deltaY;
                }
            });
        });

        function saveRecommendation() {
            alert('추천이 저장되었습니다!');
        }
    </script>
</body>

</html>
