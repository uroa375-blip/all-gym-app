<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ALL GYM - Age</title>
    <link rel="stylesheet" href="css/age.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="age-container">
        <div class="top-content">
            <h1 class="page-title">나이는요?</h1>
            <p class="page-desc">동일한 나이대의 회원님들께서 많이 계신 곳을<br>추천해 드립니다.</p>
        </div>

        <!-- Scroll Picker Area -->
        <div class="picker-wrapper">
            <div class="highlight-bar"></div>
            <div class="number-scroller" id="numberScroller">
                <!-- Numbers will be injected via JS -->
            </div>
        </div>

        <div class="bottom-actions">
            <a href="gender.html" class="btn btn-prev">이전</a>
            <button class="btn btn-next" id="nextBtn">다음</button>
        </div>
    </div>

    <script>
        const scroller = document.getElementById('numberScroller');
        const itemHeight = 50; // Height of each number item in px

        // Generate numbers 0 to 100
        for (let i = 0; i <= 100; i++) {
            const el = document.createElement('div');
            el.className = 'number-item';
            el.textContent = i;
            el.dataset.value = i;
            scroller.appendChild(el);
        }

        // Add padding to top and bottom so first/last items can reach center
        // Wrapper height is 250px (5 items visible). Center is the 3rd item.
        // So we need padding for 2 items above and 2 items below.
        // 2 * 50 = 100px padding.
        // Handled in CSS usually, but ensuring understanding of logic here.

        // Default selection (e.g., 28)
        const defaultAge = 28;
        
        // Scroll to default on load
        window.onload = () => {
             // Calculate position: (value * itemHeight)
             scroller.scrollTop = defaultAge * itemHeight;
        };

        // Get the next button
        const nextBtn = document.getElementById('nextBtn');
        // Add click event listener to the next button
        nextBtn.addEventListener('click', () => {
             window.location.href = 'weight.html';
        });

        // Scroll interaction to highlight center item
        let scrollTimeout;
        scroller.addEventListener('scroll', () => {
            clearTimeout(scrollTimeout);
            
            // Highlight logic during scroll
            updateActiveItem();

            // Snap logic after scroll stops (optional if CSS scroll-snap is used, 
            // but CSS snap is smoother. We will use CSS snap in age.css)
        });

        function updateActiveItem() {
            const centerPosition = scroller.scrollTop + (scroller.clientHeight / 2);
            // Index of the item roughly in the center
            // Adjust calculation based on padding. 
            // Padding-top is 100px. 
            // item 0 starts at 0 relative to content, but scrollTop is 0 when item 0 is at top of padding? 
            // implementation detail: 
            // If padding-top is equal to (containerHeight/2 - itemHeight/2), then item 0 is centered at scrollTop 0.
            
            const index = Math.round(scroller.scrollTop / itemHeight);
            
            const items = document.querySelectorAll('.number-item');
            items.forEach(item => item.classList.remove('active'));
            
            if (items[index]) {
                items[index].classList.add('active');
            }
        }

        // Initial update
        // We need to wait for layout if we relied on calculations, but since we set initial scrollTop...
        // Let's use intersection observer for more robust highlighting if manual calc is tricky?
        // Actually manual calc is reliable with fixed heights.
    </script>
</body>

</html>
